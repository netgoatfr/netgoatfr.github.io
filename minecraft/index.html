<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Minecraft scripts - netgoatfr</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  > Hey there i'm netgoatfr :]
  <center><h1>Here are some of my stuff related to minecraft</h1></center>
  <div>
    <h2>Scripts</h2>
    <p> Most .py scripts will require the mod <a href="https://minescript.net/">Minescript</a> which is a ery handy mod that allow for client side scripting easily</p>
    <div>
      <h3>Book export</h3>
      <p>This minescript script allow to export all enchanted books from all inventories nearby. Used for classification, ranking and selling</p>
      <p>This script uses the library <a href="https://pypi.org/project/nbtlib/">nbtlib</a></p>
      <div class="code">
        <details>
          <summary>Show code</summary>
          <button onclick="copyCode(this)">Copy</button>
          <pre><code>
import java, minescript
import json
from nbtlib import parse_nbt, Compound

# This is to execute java code
Toolkit = java.JavaClass("java.awt.Toolkit")
StringSelection = java.JavaClass("java.awt.datatransfer.StringSelection")

def copy_to_clipboard(text: str):
    # Use java built in clipboard
    clipboard = Toolkit.getDefaultToolkit().getSystemClipboard()
    selection = StringSelection(text)
    clipboard.setContents(selection, None)

# Read player data
inv = minescript.player(nbt=True)
parsed = parse_nbt(inv.nbt)["Inventory"].unpack()  # Read player inv and return a python dict object (containing player's inventory)
books = []

for slot in parsed:
    if slot["id"] == "minecraft:enchanted_book":
        components = slot["components"]  # read item's components
        stored_enchantments = components.get("minecraft:stored_enchantments", {})
        enchants = {}
        for k, v in stored_enchantments.items():
            enchants[k.replace("minecraft:", "")] = v  # Clean enchants name
        books.append(enchants)

# Finally, copy the diffrent books to clipboard
copy_to_clipboard(json.dumps(books))
print("Books copied to clipboard")

          </code></pre>
        </details>
      </div>
    </div>  
    <div>
      <h3>Book classifier</h3>
      <p>This is script on this website where you paste the list of books that you got from the previous script, and it rank them in term of usability.</p>
      <p>tou can find it here: <a href="/minecraft/book_classfier.html">/minecraft/book_classifier.html</a></p>
      
    </div>
    
  </div>
<script>
  function copyCode(button) {
    const code = button.nextElementSibling.innerText;
    navigator.clipboard.writeText(code);
  }
</script>
</body>
</html>


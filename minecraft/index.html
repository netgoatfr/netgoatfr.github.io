<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Minecraft scripts - netgoatfr</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <center><h1>Here are some of my stuff related to minecraft</h1></center>
  <div>
    <h2>Scripts</h2>
    <p> Most .py scripts will require the mod <a href="https://minescript.net/">Minescript</a> which is a very handy mod that allow for client side scripting easily</p>
    <div>
      <h3>Book export</h3>
      <p>This minescript script allow to export all enchanted books from all inventories nearby. Used for classification, ranking and selling</p>
      <p>This script uses the library <a href="https://pypi.org/project/nbtlib/">nbtlib</a></p>
      <p>Due to limitations, the script can only read enchanted books from the player inventory and not chests</p>
      <div class="code">
        <details>
          <summary>Show code</summary>
          <button onclick="copyCode(this)">Copy</button>
          <pre><code>
import json
from nbtlib import parse_nbt
import java, minescript
# Java clipboard helper
Toolkit = java.JavaClass("java.awt.Toolkit")
StringSelection = java.JavaClass("java.awt.datatransfer.StringSelection")

def copy_to_clipboard(text: str):
    clipboard = Toolkit.getDefaultToolkit().getSystemClipboard()
    selection = StringSelection(text)
    clipboard.setContents(selection, None)

books = []
def parse_inventory(nbt_data, items_key="Inventory"):
    parsed_books = []
    parsed = parse_nbt(nbt_data)[items_key].unpack()
    for slot in parsed:
        if slot["id"] == "minecraft:enchanted_book":
            components = slot["components"]
            stored_enchantments = components.get("minecraft:stored_enchantments", {})
            enchants = {k.replace("minecraft:", ""): v for k, v in stored_enchantments.items()}
            parsed_books.append(enchants)
    return parsed_books

player_inv = minescript.player(nbt=True)
books.extend(parse_inventory(player_inv.nbt))
copy_to_clipboard(json.dumps(books))
print(f"{len(books)} enchanted books copied to clipboard")



          </code></pre>
        </details>
      </div>
    </div>  
    <div>
      <h3>Book selector</h3>
      <p>This is page on this website where you select books with specific enchants and export them (like the script before) </p>
      <p>You can find it here: <a href="/minecraft/book_selector.html">/minecraft/book_selector.html</a></p>
    </div>
    <div>
      <h3>Book classifier</h3>
      <p>This is script on this website where you paste the list of books that you got from the previous script, and it rank them in term of usability.</p>
      <p>You can find it here: <a href="/minecraft/book_classfier.html">/minecraft/book_classifier.html</a></p>
    </div>
    
  </div>
<script>
  function copyCode(button) {
    const code = button.nextElementSibling.innerText;
    navigator.clipboard.writeText(code);
  }
</script>
</body>
</html>


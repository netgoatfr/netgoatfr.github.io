<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Minecraft scripts - netgoatfr</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <center><h1>Here are some of my stuff related to minecraft</h1></center>
  <div>
    <h2>Scripts</h2>
    <p> Most .py scripts will require the mod <a href="https://minescript.net/">Minescript</a> which is a very handy mod that allow for client side scripting easily</p>
    <div>
      <h3>Book export</h3>
      <p>This minescript script allow to export all enchanted books from all inventories nearby. Used for classification, ranking and selling</p>
      <p>This script uses the library <a href="https://pypi.org/project/nbtlib/">nbtlib</a></p>
      <div class="code">
        <details>
          <summary>Show code</summary>
          <button onclick="copyCode(this)">Copy</button>
          <pre><code>
import java, minescript
import json
from nbtlib import parse_nbt

# Java clipboard helper
Toolkit = java.JavaClass("java.awt.Toolkit")
StringSelection = java.JavaClass("java.awt.datatransfer.StringSelection")

def copy_to_clipboard(text: str):
    clipboard = Toolkit.getDefaultToolkit().getSystemClipboard()
    selection = StringSelection(text)
    clipboard.setContents(selection, None)

books = []

def parse_inventory(nbt_data, items_key="Inventory"):
    parsed_books = []
    parsed = parse_nbt(nbt_data)[items_key].unpack()
    for slot in parsed:
        if slot["id"] == "minecraft:enchanted_book":
            components = slot["components"]
            stored_enchantments = components.get("minecraft:stored_enchantments", {})
            enchants = {k.replace("minecraft:", ""): v for k, v in stored_enchantments.items()}
            parsed_books.append(enchants)
    return parsed_books

# 1. Read player inventory
player_inv = minescript.player(nbt=True)
books.extend(parse_inventory(player_inv.nbt))

# 2. Detect any currently open container (chest or other)
container = minescript.container(nbt=True)  # returns None if no container open
if container:
    # Chest NBT uses "Items" key
    books.extend(parse_inventory(container.nbt, items_key="Items"))

# Copy all collected books to clipboard
copy_to_clipboard(json.dumps(books))
print(f"{len(books)} enchanted books copied to clipboard")


          </code></pre>
        </details>
      </div>
    </div>  
    <div>
      <h3>Book classifier</h3>
      <p>This is script on this website where you paste the list of books that you got from the previous script, and it rank them in term of usability.</p>
      <p>tou can find it here: <a href="/minecraft/book_classfier.html">/minecraft/book_classifier.html</a></p>
      
    </div>
    
  </div>
<script>
  function copyCode(button) {
    const code = button.nextElementSibling.innerText;
    navigator.clipboard.writeText(code);
  }
</script>
</body>
</html>

